serenity {
#    take.screenshots = FOR_FAILURES
  compress.filenames = false
}

headless.mode = true

environment = browserstack
environments {
  local {
    webdriver {
      driver = chrome
      capabilities {
        browserName = "chrome"
        acceptInsecureCerts = true
        "goog:chromeOptions" {
          args = ["test-type", "no-sandbox", "ignore-certificate-errors", "--window-size=1000,800",
            "incognito", "disable-infobars", "disable-gpu", "disable-default-apps", "disable-popup-blocking"]
        }
      }
    }
  }
  browserstack {
    webdriver {
      driver = remote
      remote.url =
        "https://"${BROWSERSTACK_USER}":"${BROWSERSTACK_KEY}"@hub.browserstack.com/wd/hub"
    }
  }
  windows_chrome {
    webdriver {
      capabilities {
        browserName = "chrome"
        "bstack:options" {
          os = "Windows"
          osVersion = "11"
          browserName: "Chrome"
          browserVersion: 103.0
        }
        "goog:chromeOptions" {
          args = ["test-type", "no-sandbox", "ignore-certificate-errors", "--window-size=1000,800",
            "incognito", "disable-infobars", "disable-gpu", "disable-default-apps", "disable-popup-blocking"]
        }
      }
    }
  }
  windows_firefox {
    webdriver {
      capabilities {
        browserName = "firefox"
        "bstack:options" {
          os = "Windows"
          osVersion = "11"
          browserName: "Firefox"
          browserVersion: 109
        }
      }
    }
  }
  mac_safari {
    webdriver {
      capabilities {
        browserName = "safari"
        "bstack:options" {
          os = "OS X"
          osVersion = "Big Sur"
          browserName: "Safari"
          browserVersion: 14.1
        }
      }
    }
  }
}
